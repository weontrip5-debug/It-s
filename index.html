<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Language Reader</title>
<style>
body { font-family: system-ui; padding: 1rem; line-height: 1.8; }
.word { cursor: pointer; }
.saved { background: #ffeaa7; }
</style>
</head>
<body>

<h2>文章を貼り付け</h2>
<textarea id="input" rows="6" style="width:100%;"></textarea>
<button onclick="render()">読む</button>

<hr>

<div id="text"></div>

<script>
const saved = JSON.parse(localStorage.getItem("words") || "{}");

function render() {
  const text = document.getElementById("input").value;
  const words = text.split(/(\s+)/);
  const container = document.getElementById("text");
  container.innerHTML = "";

  words.forEach(w => {
    if (w.trim() === "") {
      container.append(w);
    } else {
      const span = document.createElement("span");
      span.textContent = w;
      span.className = "word" + (saved[w] ? " saved" : "");
      span.onclick = () => {
        saved[w] = true;
        localStorage.setItem("words", JSON.stringify(saved));
        span.classList.add("saved");
      };
      container.append(span);
    }
  });
}
</script>

</body>
  <hr>
<h3>保存した単語</h3>
<ul id="list"></ul>

<script>
function renderList() {
  const ul = document.getElementById("list");
  ul.innerHTML = "";
  Object.keys(saved).forEach(w => {
    const li = document.createElement("li");
    li.textContent = w;
    ul.appendChild(li);
  });
}
renderList();
</script>

</html>
<hr>
<h3>復習</h3>
<button onclick="quiz()">クイズ出題</button>
<p id="quiz"></p>

<script>
function quiz() {
  const words = Object.keys(saved);
  if (words.length === 0) return;
  const w = words[Math.floor(Math.random() * words.length)];
  document.getElementById("quiz").textContent =
    `この単語の意味を思い出してね： ${w}`;
}
</script>
<hr>
<h3>クイズ</h3>
<button onclick="quiz()">クイズ開始</button>
<p id="quiz"></p>
<button id="showAnswer" onclick="showAnswer()" style="display:none;">答えを表示</button>

<script>
let currentWord = null;

function quiz() {
  const words = Object.keys(saved);
  if (words.length === 0) {
    alert("まず単語を保存してください");
    return;
  }
  currentWord = words[Math.floor(Math.random() * words.length)];
  document.getElementById("quiz").textContent = `この単語の意味は？: ${currentWord}`;
  document.getElementById("showAnswer").style.display = "inline";
}

function showAnswer() {
  // 今は簡易版として単語をそのまま答えに表示
  // 翻訳や意味を自分で覚えておく想定
  document.getElementById("quiz").textContent = `答え: ${currentWord}`;
  document.getElementById("showAnswer").style.display = "none";
}
</script>
